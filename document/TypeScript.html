<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript | DataFan UI</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="所有的伟大，都源于一个勇敢的开始">
    
    <link rel="preload" href="/assets/css/0.styles.61f56397.css" as="style"><link rel="preload" href="/assets/js/app.fbb00a38.js" as="script"><link rel="preload" href="/assets/js/2.2784263e.js" as="script"><link rel="preload" href="/assets/js/37.16584230.js" as="script"><link rel="prefetch" href="/assets/js/10.dca66e9a.js"><link rel="prefetch" href="/assets/js/11.70a5ddb8.js"><link rel="prefetch" href="/assets/js/12.8c6d40d7.js"><link rel="prefetch" href="/assets/js/13.64ba72fb.js"><link rel="prefetch" href="/assets/js/14.009ac787.js"><link rel="prefetch" href="/assets/js/15.fd8378a0.js"><link rel="prefetch" href="/assets/js/16.dd26dbe5.js"><link rel="prefetch" href="/assets/js/17.76829008.js"><link rel="prefetch" href="/assets/js/18.e6e5543e.js"><link rel="prefetch" href="/assets/js/19.7ea3c23e.js"><link rel="prefetch" href="/assets/js/20.f1cf9eeb.js"><link rel="prefetch" href="/assets/js/21.f8c52346.js"><link rel="prefetch" href="/assets/js/22.758b3ec0.js"><link rel="prefetch" href="/assets/js/23.67a7a48f.js"><link rel="prefetch" href="/assets/js/24.475a90f9.js"><link rel="prefetch" href="/assets/js/25.efe349b4.js"><link rel="prefetch" href="/assets/js/26.6c749548.js"><link rel="prefetch" href="/assets/js/27.d166aa9e.js"><link rel="prefetch" href="/assets/js/28.43da4518.js"><link rel="prefetch" href="/assets/js/29.3cea99ae.js"><link rel="prefetch" href="/assets/js/3.30e359b9.js"><link rel="prefetch" href="/assets/js/30.ea700635.js"><link rel="prefetch" href="/assets/js/31.f1d4d465.js"><link rel="prefetch" href="/assets/js/32.0b2beb0a.js"><link rel="prefetch" href="/assets/js/33.5b864d31.js"><link rel="prefetch" href="/assets/js/34.3ebd8617.js"><link rel="prefetch" href="/assets/js/35.c887bfb5.js"><link rel="prefetch" href="/assets/js/36.5743c567.js"><link rel="prefetch" href="/assets/js/38.b036bcdf.js"><link rel="prefetch" href="/assets/js/39.9ec52d5d.js"><link rel="prefetch" href="/assets/js/4.4115b534.js"><link rel="prefetch" href="/assets/js/40.1bc3f5b7.js"><link rel="prefetch" href="/assets/js/41.52820797.js"><link rel="prefetch" href="/assets/js/5.430e0c7a.js"><link rel="prefetch" href="/assets/js/6.9617d452.js"><link rel="prefetch" href="/assets/js/7.dc8a3d69.js"><link rel="prefetch" href="/assets/js/8.bb5f4b4c.js"><link rel="prefetch" href="/assets/js/9.d74d7196.js">
    <link rel="stylesheet" href="/assets/css/0.styles.61f56397.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DataFan UI</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/components/" class="nav-link">
  组件中心
</a></div><div class="nav-item"><a href="/design/" class="nav-link">
  规范文档
</a></div><div class="nav-item"><a href="/document/" class="nav-link router-link-active">
  开发手册
</a></div><div class="nav-item"><a href="https://github.com/young-datafan/datafan-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/components/" class="nav-link">
  组件中心
</a></div><div class="nav-item"><a href="/design/" class="nav-link">
  规范文档
</a></div><div class="nav-item"><a href="/document/" class="nav-link router-link-active">
  开发手册
</a></div><div class="nav-item"><a href="https://github.com/young-datafan/datafan-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/document/" aria-current="page" class="sidebar-link">开发手册</a></li><li><a href="/document/vue3/" class="sidebar-link">Vue3 新框架&amp;组件</a></li><li><a href="/document/pinia.html" class="sidebar-link">Pinia 新一代状态管理</a></li><li><a href="/document/TypeScript.html" aria-current="page" class="active sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-是什么" class="sidebar-link">TypeScript 是什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-的设计初衷" class="sidebar-link">Typescript 的设计初衷</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-和-javascript-的区别" class="sidebar-link">TypeScript 和 JavaScript 的区别</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-的两大特性" class="sidebar-link">TypeScript 的两大特性</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-的优点" class="sidebar-link">TypeScript 的优点</a></li></ul></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-开发环境的搭建" class="sidebar-link">TypeScript 开发环境的搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/TypeScript.html#npm-安装-typescript" class="sidebar-link">NPM 安装 TypeScript</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#hello-typescript" class="sidebar-link">Hello TypeScript</a></li></ul></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-的类型系统" class="sidebar-link">TypeScript 的类型系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/TypeScript.html#原始类型" class="sidebar-link">原始类型</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#数组-array" class="sidebar-link">数组（array）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#函数-function" class="sidebar-link">函数（function）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#接口-interfaces" class="sidebar-link">接口（interfaces）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#任意值-any" class="sidebar-link">任意值（any）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#unknown" class="sidebar-link">Unknown</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#void" class="sidebar-link">Void</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#null-和-undefined" class="sidebar-link">Null 和 Undefined</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#never" class="sidebar-link">Never</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#元组类型-tuple" class="sidebar-link">元组类型（Tuple）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#枚举-enum" class="sidebar-link">枚举（enum）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#联合类型-union-types" class="sidebar-link">联合类型（Union Types）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#交叉类型-intersection-types" class="sidebar-link">交叉类型（Intersection Types）</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#类型别名" class="sidebar-link">类型别名</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#type-与-interface-的异同" class="sidebar-link">type 与 interface 的异同</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#类型断言" class="sidebar-link">类型断言</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#类型推论" class="sidebar-link">类型推论</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#泛型-generics" class="sidebar-link">泛型（Generics）</a></li></ul></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#typescript-的面向对象" class="sidebar-link">TypeScript 的面向对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/TypeScript.html#类的创建" class="sidebar-link">类的创建</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#构造函数" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#接口" class="sidebar-link">接口</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#封装" class="sidebar-link">封装</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#泛型" class="sidebar-link">泛型</a></li></ul></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#了解-tsconfig-json" class="sidebar-link">了解 tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#ts-在-vue3-中的使用" class="sidebar-link">TS 在 vue3 中的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/TypeScript.html#了解-setup-和-definecomponent" class="sidebar-link">了解 setup 和 defineComponent</a></li><li class="sidebar-sub-header"><a href="/document/TypeScript.html#了解响应式-api" class="sidebar-link">了解响应式 API</a></li></ul></li></ul></li><li><a href="/document/vue3-base.html" class="sidebar-link">Vue3 基础知识</a></li><li><a href="/document/x6/" class="sidebar-link">antv-X6</a></li><li><a href="/document/Promise/" class="sidebar-link">Promise对象</a></li><li><a href="/document/Closure/" class="sidebar-link">闭包和Http缓存机制</a></li><li><a href="/document/vue3-unti-test.html" class="sidebar-link">Vue3 单元测试</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h1> <h2 id="typescript-是什么"><a href="#typescript-是什么" class="header-anchor">#</a> TypeScript 是什么</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>TypeScript 是 JavaScript 类型的超集，它可以编译成纯 JavaScript。TypeScript 可以在任何浏览器、任何计算机和任何操作系统上运行，并且是开源的。</p></div> <p>以上是<a href="https://www.tslang.cn/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对于 TypeScript 的定义。</p> <p>TypeScript 简称 TS，既是一门新语言，也是 JS 的一个超集，它是在 JavaScript 的基础上增加了一套类型系统，它支持所有的 JS 语句，为工程化开发而生，最终在编译的时候去掉类型和特有的语法，生成 JS 代码。</p> <h3 id="typescript-的设计初衷"><a href="#typescript-的设计初衷" class="header-anchor">#</a> <strong>Typescript 的设计初衷</strong></h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>关于 JavaScript 有一个段子：动态一时爽，重构地雷场。</p></div> <p>在大型应用的开发过程中，由于 JavaScript 动态语言与弱类型的语言特性，随着成员数量的增加、代码量的增长、业务场景复杂度的上升，文档及单元测试的缺失等情况，暴露出了以下问题：</p> <ul><li>类型错误多，bug 率居高不下。</li> <li>缺少文档、新成员理解应用逻辑困难。</li> <li>维护成本高、可扩展性差。</li></ul> <p>在软件开发过程中，随着需求的变化和系统规模的增大，项目不可避免地趋于复杂，最终造成了项目中后期进度缓慢的情形 。如何对软件复杂度及其增长速率进行有效控制，便成为一个日益突出的问题。Typescript 正是在这种情况下，应运而生的。</p> <h3 id="typescript-和-javascript-的区别"><a href="#typescript-和-javascript-的区别" class="header-anchor">#</a> TypeScript 和 JavaScript 的区别</h3> <table><thead><tr><th><strong>TypeScript</strong></th> <th><strong>JavaScript</strong></th></tr></thead> <tbody><tr><td>JavaScript 的超集用于解决大型项目的代码复杂性</td> <td>一种脚本语言，用于创建动态网页</td></tr> <tr><td>可以在编译期间发现并纠正错误</td> <td>作为一种解释型语言，只能在运行时发现错误</td></tr> <tr><td>强类型，支持静态和动态类型</td> <td>弱类型，没有静态类型选项</td></tr> <tr><td>最终被编译成 JavaScript 代码，使浏览器可以理解</td> <td>可以直接在浏览器中使用</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><p>什么是动态？什么是静态？</p> <p>动态语言是指在运行期间才去做数据类型检测的语言。静态语言是指在编译期间对数据类型进行检查的语言。</p></li> <li><p>强类型语言？弱类型语言？</p> <p>强类型语言是一种强制类型定义的语言，即一旦某一个变量被定义类型，如果不经强制转换，那么它永远就是该数据类型。
弱类型语言是一种弱类型定义的语言，某一个变量被定义类型，该变量可以根据环境变化自动进行转换，不需要经过现行强制转换。</p></li></ul></div> <h3 id="typescript-的两大特性"><a href="#typescript-的两大特性" class="header-anchor">#</a> TypeScript 的两大特性</h3> <ul><li>静态类型检查</li> <li>面向对象特性</li></ul> <h3 id="typescript-的优点"><a href="#typescript-的优点" class="header-anchor">#</a> TypeScript 的优点</h3> <ul><li><p><strong>静态输入</strong>
静态类型化是一种功能，可以在进行编写脚本时检测错误。查找并修复错误，对于编写更健壮的代码并对其进行维护，以便使得代码质量更好、更清晰。</p></li> <li><p><strong>全面支持面向对象</strong>
为了更好地进行项目的开发，TypeScript 完全<strong>支持面向对象</strong>，它引入了类，对象，接口等概念，同时它也支持封装，继承等特性，用它进行开发，你的代码将完全符合<strong>OOP 特性</strong>（Object Oriented Programming），代码将会变得非常好维护。</p></li> <li><p><strong>大型的开发项目</strong>
有时为了改进开发项目，需要对代码库进行小的增量更改。这些小小的变化可能会产生严重的、意想不到的后果，因此有必要撤销这些变化。而使用 TypeScript 工具来进行重构更变的容易、快捷。</p></li> <li><p><strong>更好的协作</strong>
当发开大型项目时，会有许多开发人员，此时乱码和错误的机也会增加。类型安全是一种在编码期间检测错误的功能，而不是在编译项目时检测错误。这为开发团队创建了一个更高效的编码和调试过程。</p></li></ul> <h2 id="typescript-开发环境的搭建"><a href="#typescript-开发环境的搭建" class="header-anchor">#</a> TypeScript 开发环境的搭建</h2> <p>我们需要使用到 <code>npm</code> 工具安装。</p> <h3 id="npm-安装-typescript"><a href="#npm-安装-typescript" class="header-anchor">#</a> NPM 安装 TypeScript</h3> <p>如果你的本地环境已经安装了<code>npm</code>工具，可以使用以下命令来安装。</p> <p>使用国内镜像：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmmirror.com
</code></pre></div><p>安装 typescript：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -g typescript
</code></pre></div><p>以上命令会在全局环境下安装 tsc 命令，安装完成之后，我们就可以在任何地方执行 <code>tsc</code> 命令了。</p> <h3 id="hello-typescript"><a href="#hello-typescript" class="header-anchor">#</a> Hello TypeScript</h3> <p>新建一个 <code>hello.ts</code> 的文件，代码如下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> person
<span class="token punctuation">}</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token string">'Tom'</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayHello</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>然后执行</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tsc hello.ts
</code></pre></div><p>这时候会生成一个编译好的文件 hello.js：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> person
<span class="token punctuation">}</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token string">'Tom'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayHello</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>在 TypeScript 中，我们使用 <code>:</code> 指定变量的类型。</p> <p>上述例子中，我们用 <code>:</code> 指定 <strong>person</strong> 参数类型为 <strong>string</strong>。但是编译为 js 之后，并没有什么检查的代码被插入进来。</p> <p>这是因为<strong>TypeScript 只会在编译时对类型进行静态检查，如果发现有错误，编译的时候就会报错</strong>。而在运行时，与普通的 JavaScript 文件一样，不会对类型进行检查。</p> <h2 id="typescript-的类型系统"><a href="#typescript-的类型系统" class="header-anchor">#</a> TypeScript 的类型系统</h2> <h3 id="原始类型"><a href="#原始类型" class="header-anchor">#</a> 原始类型</h3> <p>JavaScript 原始类型也同样适应于 TypeScript 的类型系统</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 在 JavaScript 中</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Hello World'</span> <span class="token comment">// 字符串</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 数值</span>
<span class="token keyword">const</span> bool <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 布尔值</span>

<span class="token comment">// 在 TypeScript 中</span>
<span class="token keyword">const</span> str<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello World'</span> <span class="token comment">// 字符串</span>
<span class="token keyword">const</span> num<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 数值</span>
<span class="token keyword">const</span> bool<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 布尔值</span>
</code></pre></div><p>不过在实际的编程过程中，原始数据类型的类型定义是可以省略的，因为 TypeScript 会根据你声明变量时赋值的类型，自动帮你推导变量类型，也就是可以跟平时写 JavaScript 一样。</p> <h3 id="数组-array"><a href="#数组-array" class="header-anchor">#</a> 数组（array）</h3> <p>TypeScript 像 JavaScript 一样可以操作数组元素。</p> <p>在 JavaScript 中定义数组通常采用以下方式：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 直接定义</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// 采用构建函数方式</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>在 TypeScript 中，通常采用两种方式定义数组。 第一种，可以<strong>在元素类型后面接上</strong> <code>[]</code>，表示由此类型元素组成的一个数组：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 表示数值数组</span>
<span class="token keyword">let</span> list<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre></div><p>第二种方式是<strong>使用数组泛型</strong>，<code>Array&lt;元素类型&gt;</code>：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> list<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="函数-function"><a href="#函数-function" class="header-anchor">#</a> 函数（function）</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>函数是 JavaScript 应用程序的基础。 它帮助你实现抽象层，模拟类，信息隐藏和模块。 在 TypeScript 里，虽然已经支持类，命名空间和模块，但函数仍然是主要的定义 <em>行为</em>的地方。 TypeScript 为 JavaScript 函数添加了额外的功能，让我们可以更容易地使用。</p></div> <p><strong>函数的写法</strong></p> <p>在 JavaScript ，函数有很多种写法：比如函数声明、函数表达式、箭头函数以及对象上的方法等等。在 TypeScript 中，函数的写法就是<strong>把类型写在参数后面，返回值写在圆括号后面</strong>。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 函数声明写法</span>
<span class="token comment">// 在 JavaScript 中</span>
<span class="token keyword">function</span> <span class="token function">sum1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token comment">// 在 TypeScript 中</span>
<span class="token keyword">function</span> <span class="token function">sum1</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><p>也可以通过添加<code>?</code>来定义可选属性。</p> <p><strong>函数的重载</strong></p> <p>在实际开发中，你可能会接触到一个 API 有多个 TS 类型的情况，比如 Vue 的 watch API 。
Vue 的这个 watch API 在被调用时，需要接收一个数据源参数，当监听单个数据源和多个数据源时，需要匹配不同的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用函数重载</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// TS 类型</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// TS 类型</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Welcome, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Welcome, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// 单个问候语</span>
<span class="token keyword">const</span> greeting <span class="token operator">=</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">'Petter'</span><span class="token punctuation">)</span> <span class="token comment">// 此时只有一个类型 string</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting<span class="token punctuation">)</span> <span class="token comment">// Welcome, Petter!</span>

<span class="token comment">// 多个问候语</span>
<span class="token keyword">const</span> greetings <span class="token operator">=</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Petter'</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token string">'Jimmy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 此时只有一个类型 string[]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greetings<span class="token punctuation">)</span> <span class="token comment">// [ 'Welcome, Petter!', 'Welcome, Tom!', 'Welcome, Jimmy!' ]</span>

<span class="token comment">// 当不用函数重载时，在入参和返回值的类型这里，显得非常乱</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Welcome, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Welcome, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// 在调用函数时，定义的变量也无法准确的获得它们的类型</span>
<span class="token comment">// 此时这个变量依然可能有多个类型，增加了编码时的心智负担</span>
<span class="token keyword">const</span> greeting<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>第 1 行是函数的 TS 类型，告知 TypeScript ，当入参为 <strong>string</strong> 类型时，返回值也是 <strong>string</strong> ;</p> <p>第 2 行也是函数的 TS 类型，告知 TypeScript ，当入参为 <strong>string[]</strong> 类型时，返回值也是 <strong>string[]</strong> ;</p> <p>第 3 行开始才是真正的函数体，这里的函数入参需要把可能涉及到的类型都写出来，用以匹配前两行的类型，并且这种情况下，函数的返回值类型可以省略，因为在第 1 、 2 行里已经定义过返回类型了。</p> <h3 id="接口-interfaces"><a href="#接口-interfaces" class="header-anchor">#</a> 接口（interfaces）</h3> <p>在 TypeScript 中，我们使用<strong>接口（Interfaces）<strong>来定义对象的类型。可以通过添加<code>?</code>来定义可选属性，<code>readonly</code>来定义</strong>只读属性</strong>。同样接口也可以调用自己身接口的属性以及可以继承其他接口。</p> <p>接口只定义对象的结构，而不考虑实际值。</p> <p>实现接口就是使类满足接口的要求，通过使用关键字<code>implements</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">UserItem</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">// 可选属性</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  enjoyFoods<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  friendList<span class="token operator">:</span> UserItem<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里Admin继承了 UserItem 的所有属性类型，并追加了一个权限等级属性</span>
<span class="token keyword">interface</span> <span class="token class-name">Admin</span> <span class="token keyword">extends</span> <span class="token class-name">UserItem</span> <span class="token punctuation">{</span>
  permissionLevel<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> admin<span class="token operator">:</span> Admin <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Petter'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  friendList<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'Marry'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
      enjoyFoods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pizza'</span><span class="token punctuation">,</span> <span class="token string">'ice cream'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      friendList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  permissionLevel<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果继承过程中不需要那么多属性，可以通过 <code>Omit</code> 帮助类型来实现</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token operator">&gt;</span></span>
</code></pre></div><p>其中 <code>T</code> 代表已有的一个对象类型， <code>K</code> 代表要删除的属性名，如果只有一个属性就直接是一个字符串，如果有多个属性，用 <code>|</code> 来分隔开，通过以下方式就是删除了两个不需要的属性：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 这里在继承 UserItem 类型的时候，删除了两个多余的属性</span>
<span class="token keyword">interface</span> <span class="token class-name">Admin</span> <span class="token keyword">extends</span> <span class="token class-name">Omit<span class="token operator">&lt;</span>UserItem<span class="token punctuation">,</span> <span class="token string">'enjoyFoods'</span> <span class="token operator">|</span> <span class="token string">'friendList'</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  permissionLevel<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="任意值-any"><a href="#任意值-any" class="header-anchor">#</a> 任意值（any）</h3> <p>类型定义使用<code>any</code>可以让 TypeScript 将<strong>类型检查关闭</strong>，<code>any</code>能够兼容所有的类型（包括它自己）。所有类型都能被赋值给它，它也能被赋值给其他任何类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> power<span class="token operator">:</span> <span class="token builtin">any</span>

<span class="token comment">// 赋值任意类型</span>
power <span class="token operator">=</span> <span class="token string">'123'</span>
power <span class="token operator">=</span> <span class="token number">123</span>

<span class="token comment">// 它也兼容任何类型</span>
<span class="token keyword">let</span> num<span class="token operator">:</span> <span class="token builtin">number</span>
power <span class="token operator">=</span> num
num <span class="token operator">=</span> power

<span class="token comment">// 在任意值上访问任何属性都是允许的，也允许调用任何方法</span>
</code></pre></div><p>当你把 JavaScript 迁移至 TypeScript 时，你将会经常性使用<code>any</code>。但你必须减少对它的依赖，因为你需要<strong>确保类型安全</strong>。当使用<code>any</code>时，你基本上是在告诉 TypeScript 编译器不要进行任何的类型检查。</p> <h3 id="unknown"><a href="#unknown" class="header-anchor">#</a> Unknown</h3> <p>简单来说，<code>unknown</code>就是安全版的<code>any</code>，它跟<code>any</code>的区别在于使用<code>unknown</code>时会结合类型守卫等方式，可以确保上游数据结构不确定时，也能让代码正常执行。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">format1</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 不飘红，想干什么干什么，very dangerous</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">format2</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 代码会飘红，阻止你这么做</span>

  <span class="token comment">// 你需要收窄类型范围，例如：</span>
  <span class="token comment">// 1、类型断言 —— 不飘红，但执行时可能错误</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span>value <span class="token keyword">as</span> Number<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

  <span class="token comment">// 2、类型守卫 —— 不飘红，且确保正常执行</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 推断出类型: number</span>
    value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="void"><a href="#void" class="header-anchor">#</a> Void</h3> <p>某种程度上来说，<code>void</code>类型像是与<code>any</code>类型相反，它表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是 <code>void</code>：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="null-和-undefined"><a href="#null-和-undefined" class="header-anchor">#</a> Null 和 Undefined</h3> <p>TypeScript 里，<code>undefined</code>和<code>null</code>两者各自有自己的类型分别叫做<code>undefined</code>和<code>null</code>。 和 <code>void</code>相似，它们的本身的类型用处不是很大。</p> <h3 id="never"><a href="#never" class="header-anchor">#</a> Never</h3> <p><code>never</code> 类型表示的是空类型，也就是值永不存在的类型。</p> <p>值会永不存在的两种情况：</p> <ol><li>如果一个函数执行时抛出了<strong>异常</strong>，那么这个函数永远不存在返回值。</li> <li>函数中执行无限循环的代码（<strong>死循环</strong>），使得程序永远无法运行到函数返回值那一步，永不存在返回。</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 异常</span>
<span class="token keyword">function</span> <span class="token function">err</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token comment">// OK</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 死循环</span>
<span class="token keyword">function</span> <span class="token function">loopForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token comment">// OK</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="元组类型-tuple"><a href="#元组类型-tuple" class="header-anchor">#</a> 元组类型（Tuple）</h3> <p>JavaScript 并不支持元组，通常只能使用数组来表示元组。</p> <p>而 TypeScript 支持它，可以使用 :<code>[typeofmember1,typeofmember2]</code>的形式，为元组<strong>添加类型注解</strong>，元组可以包含<strong>任意数量</strong>的成员。其实就是个固定长度的数组。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> nameNumber<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>

nameNumber <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">]</span>

nameNumber <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">]</span> <span class="token comment">// Error</span>

<span class="token comment">// 同时还可以使用解构</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> num<span class="token punctuation">]</span> <span class="token operator">=</span> nameNumber
</code></pre></div><h3 id="枚举-enum"><a href="#枚举-enum" class="header-anchor">#</a> 枚举（enum）</h3> <p>枚举是组织收集有关联变量的一种方式，许多程序语言（如：c/c#/Java）都有枚举数据类型。下面是定义一个 TypeScript 枚举类型的方式：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">enum</span> UpdateMode <span class="token punctuation">{</span>
  <span class="token constant">MANUAL</span> <span class="token operator">=</span> <span class="token string">'MANUAL'</span><span class="token punctuation">,</span>
  <span class="token constant">ROUTEINE</span> <span class="token operator">=</span> <span class="token string">'ROUTEINE'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 简单的使用枚举类型</span>
<span class="token keyword">let</span> Mode <span class="token operator">=</span> UpdateMode<span class="token punctuation">.</span><span class="token constant">MANUAL</span>

<span class="token comment">// 类型安全</span>
Mode <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// Error:  不能赋值</span>
</code></pre></div><p>如果枚举的 UpdateMode 在后期维护中去除了其中的 MANUAL，那么下方对于 Mode 的定义赋值就会报错，便于定位问题。</p> <p>同时要是 MANUAL 的值发生了改变，只需要修改枚举值即可，不像 JavaScript 需要全局查找 &quot;MANUAL&quot; 进行修改替换。</p> <p>所以相较于 JavaScript 直接使用值类型去做判断，<strong>枚举的用法提升了代码的可读性和易维护性</strong>。</p> <h3 id="联合类型-union-types"><a href="#联合类型-union-types" class="header-anchor">#</a> 联合类型（Union Types）</h3> <p>在 JavaScript 中，可能希望属性为多种类型之一，比如字符串或者数组。这时候就可以使用 TypeScript 中的联合类型（它使用 | 作为标记，如 string | number）。
关于联合类型，一个常见的用例是一个可以接受字符串数组或单个字符串的函数：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">formatCommandline</span><span class="token punctuation">(</span>command<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> line <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> command <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    line <span class="token operator">=</span> command<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    line <span class="token operator">=</span> command<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="交叉类型-intersection-types"><a href="#交叉类型-intersection-types" class="header-anchor">#</a> 交叉类型（Intersection Types）</h3> <p>交叉类型是将多个类型合并为一个类型。这让我们可以把现有的多种类型叠加到一起成为一种类型，它包含了所需的所有类型的特性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  sex<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  sex<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">B</span> <span class="token comment">// C 将包含 A 和 B 中共有的属性</span>
<span class="token keyword">let</span> demo<span class="token operator">:</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> sex<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F</span></span> <span class="token operator">=</span> <span class="token constant">D</span> <span class="token operator">&amp;</span> <span class="token constant">E</span> <span class="token comment">// F 将是 string 类型</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">G</span></span> <span class="token operator">=</span> <span class="token builtin">number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">H</span></span> <span class="token operator">=</span> <span class="token builtin">boolean</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I</span></span> <span class="token operator">=</span> <span class="token constant">G</span> <span class="token operator">&amp;</span> <span class="token constant">H</span> <span class="token comment">// I 将是 never 类型</span>
</code></pre></div><h3 id="类型别名"><a href="#类型别名" class="header-anchor">#</a> 类型别名</h3> <p>TypeScript 提供了为类型注解设置别名的便捷语法，你可以使用 <strong>type SomeName = Some Valid Type Annotation</strong> 来创建别名。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StrOrNum</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
<span class="token comment">// 如果后面的类型种类有很多时，在使用时就可以用类型别名代替，不需要一一列举</span>

<span class="token comment">// 使用</span>
<span class="token keyword">let</span> sample<span class="token operator">:</span> StrOrNum
sample <span class="token operator">=</span> <span class="token number">123</span>
sample <span class="token operator">=</span> <span class="token string">'123'</span>

<span class="token comment">// 会检查类型</span>
sample <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// Error</span>
</code></pre></div><p>类型别名可以简化类型的使用。</p> <h3 id="type-与-interface-的异同"><a href="#type-与-interface-的异同" class="header-anchor">#</a> type 与 interface 的异同</h3> <p>类型别名用来给一个类型起个新名字，使用<code>type</code>创建类型别名，类型别名不仅可以用来表示基本类型，还可以用来表示对象类型、联合类型、元祖和交集。</p> <p>接口是命名数据结构(例如对象)的另一种方式；与 type 不同，<code>interface</code>仅限于描述对象类型。</p> <h4 id="interface-与-type-的相似之处"><a href="#interface-与-type-的相似之处" class="header-anchor">#</a> <strong>interface 与 type 的相似之处</strong></h4> <ul><li>都可以描述 Object 和 Function，两者都可以用来描述对象或函数，但语法不同。</li> <li>二者都可以被继承，interface 和 type 都可以被继承，具体的形式稍有差别，interface 是通过 extends 实现的，type 是通过&amp;实现的。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Student</span> <span class="token operator">=</span> Person <span class="token operator">&amp;</span> <span class="token punctuation">{</span> stuNo<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  stuNo<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>实现 implements，类可以实现 interface 以及 type（除联合类型外）</li></ul> <h4 id="interface-与-type-的区别"><a href="#interface-与-type-的区别" class="header-anchor">#</a> <strong>interface 与 type 的区别</strong></h4> <ul><li><p>type 可以定义 <strong>基本类型的别名</strong>，如 <code>type myString = string</code></p></li> <li><p>type 可以通过 <strong>typeof</strong> 操作符来定义，如 <code>type myType = typeof someObj</code></p></li> <li><p>type 可以申明 <strong>联合类型</strong>，如 <code>type unionType = myType1 | myType2</code></p></li> <li><p>type 可以申明 <strong>元组类型</strong>，如 <code>type yuanzu = [myType1, myType2]</code></p></li> <li><p>声明合并，如果你多次声明一个同名的<code>interface</code>，typescript 会将它们合并到一个声明中，并将它们视为一个接口，这称为<strong>声明合并</strong>。如果是<code>type</code>的话，重复使用会报错。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">test</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">test</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
test实际为 {
  name: string
  age: number
}
*/</span>
</code></pre></div></li></ul> <h3 id="类型断言"><a href="#类型断言" class="header-anchor">#</a> 类型断言</h3> <p>TypeScript 允许你覆盖它的推断，并且能以你任何你想要的方式分析它，这种机制被称为「类型断言」。TypeScript 类型断言用来告诉编译器你比它更了解这个类型，并且它不应该再发出错误。</p> <p>类型断言的一个常见用例是当你从 JavaScript 迁移到 TypeScript 时：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
foo<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token number">123</span> <span class="token comment">// Error: 'bar' 属性不存在于 ‘{}’</span>
foo<span class="token punctuation">.</span>bas <span class="token operator">=</span> <span class="token string">'hello'</span> <span class="token comment">// Error: 'bas' 属性不存在于 '{}'</span>
</code></pre></div><p>这里的代码发出了错误警告，因为 <code>foo</code> 的类型推断为 <code>{}</code>，即没有属性的对象。因此，你不能在它的属性上添加 <code>bar</code> 或 <code>bas</code>，你可以通过类型断言来避免此问题：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  bar<span class="token operator">:</span> <span class="token builtin">number</span>
  bas<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Foo
foo<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token number">123</span>
foo<span class="token punctuation">.</span>bas <span class="token operator">=</span> <span class="token string">'hello'</span>
</code></pre></div><p>请不要滥用类型断言，只在你能够确保代码正确的情况下去使用它，我们来看一个反例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 原本要求 age 也是必须的属性之一</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 但是类型断言过程中，你遗漏了</span>
<span class="token keyword">const</span> petter <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> User
petter<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Petter'</span>

<span class="token comment">// TypeScript 依然可以运行下去，但实际上你的数据是不完整的</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>petter<span class="token punctuation">)</span> <span class="token comment">// { name: 'Petter' }</span>
</code></pre></div><h3 id="类型推论"><a href="#类型推论" class="header-anchor">#</a> 类型推论</h3> <p>在实际的编程过程中，原始数据类型的类型定义是可以省略的，因为 TypeScript 会根据你声明变量时赋值的类型，自动帮你推导变量类型，这其实是 TypeScript 的类型推论功能。</p> <p>下面这个变量这样声明是 OK 的，因为 TypeScript 会帮你推导 <code>msg</code> 是 <code>string</code> 类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 相当于 msg: string</span>
<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">'Hello World'</span>

<span class="token comment">// 所以要赋值为 number 类型时会报错</span>
msg <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// Type 'number' is not assignable to type 'string'</span>
</code></pre></div><p>下面这段代码也是可以正常运行的，因为 TypeScript 会根据 <code>return</code> 的结果推导 <code>getRandomNumber</code> 的返回值是 <code>number</code> 类型，从而推导变量 <code>num</code> 也是 <code>number</code> 类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 相当于 getRandomNumber(): number</span>
<span class="token keyword">function</span> <span class="token function">getRandomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 相当于 num: number</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">getRandomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>类型推论的前提是变量在声明时有明确的值，如果一开始没有赋值，那么会被默认为 <code>any</code> 类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 此时相当于 foo: any</span>
<span class="token keyword">let</span> foo

<span class="token comment">// 所以可以任意改变类型</span>
foo <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 1</span>
foo <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="泛型-generics"><a href="#泛型-generics" class="header-anchor">#</a> 泛型（Generics）</h3> <h4 id="泛型是什么"><a href="#泛型是什么" class="header-anchor">#</a> 泛型是什么</h4> <p>泛型是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性。</p> <h4 id="为什么使用泛型"><a href="#为什么使用泛型" class="header-anchor">#</a> 为什么使用泛型</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>软件工程中，我们不仅要创建一致的定义良好的 API，同时也要考虑可重用性。 组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。</p> <p>在像 C# 和 Java 这样的语言中，可以使用泛型来创建可重用的组件，一个组件可以支持多种类型的数据。 这样用户就可以以自己的数据类型来使用组件。</p></div> <p>设计泛型的关键目的是在成员之间提供有意义的约束，这些成员可以是：</p> <ul><li>类的实例成员</li> <li>类的方法</li> <li>函数参数</li> <li>函数返回值</li></ul> <p>下面是快速创建数字类型的队列：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">QueueNumber</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
  pop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token comment">// Error: 不能推入一个 `string` 类型，只能是 `number` 类型</span>
</code></pre></div><p>当我们想要想创建一个字符串的队列时，将不得不再次修改相当大的代码。我们真正想要的一种方式是无论什么类型被推入队列，被推出的类型都与推入类型一样。当你使用泛型时，这会很容易：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">/</span> 创建一个泛型类
<span class="token keyword">class</span> <span class="token class-name">Queue<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> data<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  pop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 简单的使用</span>
<span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error：不能推入一个 `string`，只有 number 类型被允许</span>
</code></pre></div><p>通常在决定是否使用泛型时，我们有以下两个参考标准：</p> <ul><li>当你的函数、接口或类将处理多种数据类型时。</li> <li>当函数、接口或类在多个地方使用该数据类型时。</li></ul> <h4 id="泛型配合-axios-使用"><a href="#泛型配合-axios-使用" class="header-anchor">#</a> 泛型配合 axios 使用</h4> <p>通常情况下，我们会把后端返回数据格式单独放入一个 <code>interface</code> 里：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 请求接口数据</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ResponseData<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 状态码
   * @type { number }
   */</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span>

  <span class="token comment">/**
   * 数据
   * @type { T }
   */</span>
  result<span class="token operator">:</span> <span class="token constant">T</span>

  <span class="token comment">/**
   * 消息
   * @type { string }
   */</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当我们把 API 单独抽离成单个模块时：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 在 axios.ts 文件中对 axios 进行了处理，例如添加通用配置、拦截器等</span>
<span class="token keyword">import</span> Ax <span class="token keyword">from</span> <span class="token string">'./axios'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ResponseData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./interface.ts'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getUser</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Ax<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>ResponseData<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'/somepath'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接着我们写入返回的数据类型<code>User</code>，这可以让 TypeScript 顺利推断出我们想要的类型：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// user 被推断出为</span>
  <span class="token comment">// {</span>
  <span class="token comment">//  code: number,</span>
  <span class="token comment">//  result: { name: string, age: number },</span>
  <span class="token comment">//  message: string</span>
  <span class="token comment">// }</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">getUser</span><span class="token generic class-name"><span class="token operator">&lt;</span>User<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="泛型约束"><a href="#泛型约束" class="header-anchor">#</a> 泛型约束</h4> <p>有时我们可能希望限制每个类型变量接受的类型数量，这就是泛型约束的作用。</p> <p>有时候，我们希望类型变量对应的类型上存在某些属性。这时，除非我们显式地将特定属性定义为类型变量，否则编译器不会知道它们的存在。</p> <p>比如在处理字符串或数组时，我们会假设 <code>length</code> 属性是可用的。我们使用 <code>identity</code> 函数并尝试输出参数的长度：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// Error</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre></div><p>在这种情况下，编译器将不会知道 <code>T</code> 确实含有 <code>length</code> 属性，尤其是在可以将任何类型赋给类型变量 <code>T</code> 的情况下。我们需要做的就是让类型变量 <code>extends</code> 一个含有我们所需属性的接口，比如这样：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Length</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Length<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 可以获取length属性</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre></div><p><code>T extends Length</code> 用于告诉编译器，我们支持已经实现 <code>Length</code> 接口的任何类型。之后，当我们使用不含有 <code>length</code> 属性的对象作为参数调用 <code>identity</code> 函数时，TypeScript 会提示相关的错误信息。</p> <p>此外，我们还可以使用 <code>,</code> 号来分隔多种约束类型，比如：<code>&lt;T extends Length, Type2, Type3&gt;</code>。而对于上述的 <code>length</code> 属性问题来说，如果我们显式地将变量设置为数组类型，也可以解决该问题，具体方式如下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>

<span class="token comment">// or</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre></div><h4 id="泛型常用工具类型"><a href="#泛型常用工具类型" class="header-anchor">#</a> 泛型常用工具类型</h4> <p>为了方便开发者 TypeScript 内置了一些常用的工具类型，比如 Partial、Required、Readonly、Record 和 ReturnType 等。</p> <p><strong>Partial</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Partial&lt;T&gt;</code> 的作用就是将某个类型里的属性全部变为可选项 <code>?</code>。</p></div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * Make all properties in T optional
 */</span>
<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>首先通过 <code>keyof T</code> 拿到 <code>T</code> 的所有属性名，然后使用 <code>in</code> 进行遍历，将值赋给 <code>P</code>，最后通过 <code>T[P]</code> 取得相应的属性值。中间的 <code>?</code> 号，用于将所有属性变为可选。</p> <p><strong>示例</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">updateTodo</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> Todo<span class="token punctuation">,</span> fieldsToUpdate<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Todo<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>todo<span class="token punctuation">,</span> <span class="token operator">...</span>fieldsToUpdate <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> todo1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'organize desk'</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">'clear clutter'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> todo2 <span class="token operator">=</span> <span class="token function">updateTodo</span><span class="token punctuation">(</span>todo1<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  description<span class="token operator">:</span> <span class="token string">'throw out trash'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在上面的 <code>updateTodo</code> 方法中，我们利用 <code>Partial&lt;T&gt;</code> 工具类型，定义 <code>fieldsToUpdate</code> 的类型为 <code>Partial&lt;Todo&gt;</code>，即：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token punctuation">{</span>
   title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
   description<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Record</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Record&lt;K extends keyof any, T&gt;</code> 的作用是将 <code>K</code> 中所有的属性的值转化为 <code>T</code> 类型。</p></div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * Construct a type with a set of properties K of type T
 */</span>
<span class="token keyword">type</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>示例</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">PageInfo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Page</span> <span class="token operator">=</span> <span class="token string">'home'</span> <span class="token operator">|</span> <span class="token string">'about'</span> <span class="token operator">|</span> <span class="token string">'contact'</span>

<span class="token keyword">const</span> x<span class="token operator">:</span> Record<span class="token operator">&lt;</span>Page<span class="token punctuation">,</span> PageInfo<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  about<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'about'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  contact<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'contact'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  home<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Pick</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Pick&lt;T, K extends keyof T&gt;</code> 的作用是将某个类型中的子属性挑出来，变成包含这个类型部分属性的子类型。</p></div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * From T, pick a set of properties whose keys are in the union K
 */</span>
<span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>示例</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">TodoPreview</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>Todo<span class="token punctuation">,</span> <span class="token string">'title'</span> <span class="token operator">|</span> <span class="token string">'completed'</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> todo<span class="token operator">:</span> TodoPreview <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'Clean room'</span><span class="token punctuation">,</span>
  completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Exclude</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Exclude&lt;T, U&gt;</code> 的作用是将某个类型中属于另一个的类型移除掉。</p></div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * Exclude from T those types that are assignable to U
 */</span>
<span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>如果 <code>T</code> 能赋值给 <code>U</code> 类型的话，那么就会返回 <code>never</code> 类型，否则返回 <code>T</code> 类型。最终实现的效果就是将 <code>T</code> 中某些属于 <code>U</code> 的类型移除掉。</p> <p><strong>示例</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;b&quot; | &quot;c&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;c&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">&gt;</span> <span class="token comment">// string | number</span>
</code></pre></div><p><strong>ReturnType</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>ReturnType&lt;T&gt;</code> 的作用是用于获取函数 <code>T</code> 的返回类型。</p></div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * Obtain the return type of a function type
 */</span>
<span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>
  <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> <span class="token builtin">any</span>
</code></pre></div><p><strong>示例</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token comment">// void</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token comment">// {}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token comment">// number[]</span>
</code></pre></div><h2 id="typescript-的面向对象"><a href="#typescript-的面向对象" class="header-anchor">#</a> TypeScript 的面向对象</h2> <h3 id="类的创建"><a href="#类的创建" class="header-anchor">#</a> 类的创建</h3> <p>我们使用 class 进行类的声明和创建，其中的属性和方法直接进行定义，之后可以使用<code>static</code>和<code>readonly</code>对属性、方法进行修饰。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 定义一个类</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token comment">// 实例属性，需要通过对象的实例去访问</span>
  <span class="token comment">// 例如：const user = new User()，通过user.age访问</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">// 静态属性，可以直接通过类访问</span>
  <span class="token comment">// 用static关键字可以定义类属性，此时通过实例访问该属性会报错，只能通过类访问，例如：User.age</span>
  <span class="token keyword">static</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">18</span>
  <span class="token comment">// 只读属性</span>
  <span class="token keyword">readonly</span> sex<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'男'</span>

  <span class="token comment">// constructor 上的数据需要先这样定好类型</span>
  <span class="token comment">// 入参也要定义类型</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>userName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> userName
  <span class="token punctuation">}</span>

  <span class="token comment">// 方法定义</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 静态方法，同理通过类直接访问</span>
  <span class="token keyword">static</span> <span class="token function">sayhello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'say hello'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="构造函数"><a href="#构造函数" class="header-anchor">#</a> 构造函数</h3> <p>可以使用<code>constructor</code>定义一个构造器方法。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">// 构造函数会在对象创建时调用</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在实例方法中，this就表示当前的实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过this表示当前调用方法的对象</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 相当于调用了Dog中的constructor</span>
<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'小黄'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h3> <p>在 TypeScript 里，我们可以使用常用的面向对象模式。基于类的程序设计中一种最基本的模式是允许使用继承来扩展现有的类。通过继承可以将其他类中的属性和方法引入到当前类中。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Animal moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof! Woof!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>这个例子展示了最基本的继承：类从基类中继承了属性和方法。 这里， <code>Dog</code>是一个<strong>派生类</strong>，它派生自 <code>Animal</code> <strong>基类</strong>，通过 <code>extends</code>关键字。 派生类通常被称作<strong>子类</strong>，基类通常被称作 <strong>超类</strong>。</p> <p>因为 <code>Dog</code>继承了 <code>Animal</code>的功能，因此我们可以创建一个 <code>Dog</code>的实例，它能够 <code>bark()</code>和 <code>move()</code>。</p> <ul><li>通过继承可以将多个类中共有的代码写在同一个父类中，这样只需要写一次即可让所有的子类都同时拥有父类中的属性。</li> <li>如果希望在子类中添加一些父类中没有的属性或方法直接添加即可。</li> <li>如果在子类中添加了和父类相同的方法，则子类方法会覆盖掉父类中方法，这种覆盖的形式成为<strong>重写</strong>。</li></ul> <p><strong>super 关键字</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果在子类中写了构造函数，在子类构造函数中必须对父类的构造函数进行调用</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment">// 调用父类的构造函数，否则会有语法错误</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在类方法中super就表示当前类的父亲</span>
    <span class="token comment">// super.move()</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof! Woof!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>抽象类</strong></p> <p>以<code>abstract</code>开头的类就是抽象类，抽象类与其他类的区别不大，只是不能用来创建对象，换句话说，就是专门用来被继承的类。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token comment">// 定义一个抽象方法，抽象方法用abstract开头，没有方法体</span>
  <span class="token comment">// 抽象方法只能定义在抽象类中，并且子类必须对抽象方法进行重写</span>
  <span class="token keyword">abstract</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h3> <p>在传统的面向对象的编程中，一个类可以扩展另一个类，也可以实现一个或多个接口；实现一个接口可以被看作是签署了一份协议，必须遵守它的规则。接口的规则是属性和方法的签名，我们必须实现它们；</p> <p>在 TypeScript 中接口有两点不同：</p> <ul><li>接口可以扩展其他接口或者类；</li> <li>接口可以定义数据和行为而不只是行为；</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">myinterface</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj<span class="token operator">:</span> myinterface <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'yueyue'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre></div><h3 id="封装"><a href="#封装" class="header-anchor">#</a> 封装</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>对象实质上就是属性和方法的容器，它的主要作用就是存储属性和方法，这就是所谓的封装</p> <p>默认情况下，对象的属性是可以任意的修改的，为了确保数据的安全性，在 TS 中可以对属性的权限进行设置</p></div> <ul><li><p>静态属性（static）</p> <p>声明为<code>static</code>的属性或方法不再属于实例，而是属于类的属性。</p></li> <li><p>只读属性（readonly）</p> <p>如果在声明属性时添加一个<code>readonly</code>，则属性便成了只读属性无法修改。</p></li> <li><p>TS 中属性具有三种修饰符</p> <ul><li><p><code>public</code>（默认值），修饰的属性可以在任意位置访问和修改。</p></li> <li><p><code>protected</code>，可以在当前类和当前类的子类中访问和修改。</p></li> <li><p><code>private</code>，私有属性，只能在类内部进行访问和修改，可通过在类中添加方法使得私有属性可以被外部方法访问。</p></li></ul></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> _name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">private</span> _age<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">// 构造函数</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token comment">// 通过在类中添加方法使得私有属性可以被外部方法访问</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name
  <span class="token punctuation">}</span>
  <span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token comment">// ts中可以设置getter的方法</span>
  <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> value
  <span class="token punctuation">}</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'小黄'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'小白'</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">4</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
</code></pre></div><h3 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">fn</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> name
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">fn</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">interface</span> <span class="token class-name">inter</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">fn1</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> inter<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token operator">:</span> inter<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token number">45</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="了解-tsconfig-json"><a href="#了解-tsconfig-json" class="header-anchor">#</a> 了解 tsconfig.json</h2> <p>TypeScript 项目一般都会有一个 <code>tsconfig.json</code> 文件，放置于项目的根目录下，这个文件的作用是用来管理 TypeScript 在编译过程中的一些选项配置。</p> <p>在命令行输入 <code>tsc --init</code> ，这是 TypeScript 提供的初始化功能，会生成一个默认的 <code>tsconfig.json</code> 文件。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// tsconfig.json是ts编译器的配置文件，ts编译器可以根据它的信息来对代码进行编译</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// target 用来指定ts被编译为的ES的版本，esnext表示最新版本的es</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">// module 指定要使用的模块化的规范</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">// 所有严格检查的总开关</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 用来设置编译后的文件是否使用严格模式，默认 为false（当有模块代码的时候，已经默认为严格模式）</span>
    <span class="token comment">// &quot;alwaysStrict&quot;: false,</span>

    <span class="token comment">// 不允许隐式的any类型</span>
    <span class="token comment">// &quot;noImplicitAny&quot;: false,</span>

    <span class="token comment">// 不允许不明确类型的this</span>
    <span class="token comment">// &quot;noImplicitThis&quot;: false,</span>

    <span class="token comment">// 严格的检查空值</span>
    <span class="token comment">// &quot;strictNullChecks&quot;: false,</span>

    <span class="token comment">// lib 用来指定项目中要使用的库</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span>

    <span class="token comment">// outDir 用来制定编译后文件所在的目录</span>
    <span class="token comment">// &quot;outDir&quot;: &quot;./dist&quot;</span>

    <span class="token comment">// outFile 设置将代码合并为一个文件</span>
    <span class="token comment">// 设置 outFile 后，所有的全局作用域中的代码会合并到同一个文件中</span>
    <span class="token comment">// 当想把多个模块合并为一个文件，module 要指定 amd 或者 system</span>
    <span class="token comment">// &quot;outFile&quot;: &quot;./dist/app.js&quot;</span>

    <span class="token comment">// 是否对js文件进行编译，默认是false</span>
    <span class="token comment">// &quot;allowJs&quot;: false</span>

    <span class="token comment">// 是否检查js代码符合语法规范，默认是false</span>
    <span class="token comment">// &quot;checkJs&quot;: false</span>

    <span class="token comment">// 是否移除注释</span>
    <span class="token comment">// &quot;removeComments&quot;: false</span>

    <span class="token comment">// 不生成编译后的文件</span>
    <span class="token comment">// &quot;noEmit&quot;: false</span>

    <span class="token comment">// 当有错误时不生成编译后的文件</span>
    <span class="token comment">// &quot;noEmitOnError&quot;: false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// include 用来指定哪些ts文件需要被编译</span>
  <span class="token comment">// 路径：** 表示任意目录 * 表示任意文件</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// exclude 不需要被编译的文件目录</span>
  <span class="token comment">// &quot;exclude&quot;: [],</span>

  <span class="token property">&quot;references&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./tsconfig.node.json&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>完整的选项可以查看 TypeScript 官网：<a href="https://www.typescriptlang.org/tsconfig/" target="_blank" rel="noopener noreferrer">tsconfig - typescriptlang<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>一般在构建项目的时候会自动提前配置好通用的选项，只需要在不满足条件的情况下去调整就可以了。</p> <h2 id="ts-在-vue3-中的使用"><a href="#ts-在-vue3-中的使用" class="header-anchor">#</a> TS 在 vue3 中的使用</h2> <h3 id="了解-setup-和-definecomponent"><a href="#了解-setup-和-definecomponent" class="header-anchor">#</a> 了解 setup 和 defineComponent</h3> <p>Vue 3 的 Composition API 系列里，推出了一个全新的 <code>setup</code> 函数，它是一个组件选项，在创建组件之前执行，一旦 props 被解析，将作为组合式 API 的入口点。</p> <p><strong>基本用法</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// defineComponent，是为了更好的类型检查</span>
  <span class="token function">setup</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 业务代码写这里...</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 需要给 template 用的数据、函数放这里 return 出去...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>defineComponent</code> 是 Vue 3 推出的一个全新 API ，可以用于 TypeScript 的类型推导，帮你简化掉很多编写过程中的类型定义。在编写组件的过程中，你只需要维护自己定义的数据类型就可以了，专注于业务。</p> <h3 id="了解响应式-api"><a href="#了解响应式-api" class="header-anchor">#</a> 了解响应式 API</h3> <p>vue3 在生命周期里取消了 Vue 实例的 <code>this</code>，此时调用响应式数据要用到的比如 <code>ref</code> 、<code>reactive</code> 等响应式 API ，都必须通过导入才能使用，然后在 <code>setup</code> 里定义。</p> <p><strong>ref</strong></p> <p>我们在进行类型声明时，想要保证数据的响应性，就需要用到这些 API。同时基于 TypeScript 语法的类型声明写法会有所不同。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 在ts语法中定义</span>
<span class="token keyword">const</span> msg<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello World!'</span>

<span class="token comment">// 在使用 ref 时，需要使用 &lt;&gt; 来包裹类型定义</span>
<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span>
</code></pre></div><p>需要注意的是，被 <code>ref</code> 包裹的变量会全部变成对象，不管你定义的是什么类型的值，都会转化为一个 ref 对象，其中 ref 对象具有指向内部值的单个 property <code>.value</code>。</p> <p>所以我们要进行变量的读取与赋值时，需要通过 <code>xxx.value</code>。</p> <p><strong>reactive</strong></p> <p><code>reactive</code> 是继 <code>ref</code> 之后最常用的一个响应式 API 了，相对于 <code>ref</code>，它的局限性在于只适合对象、数组。</p> <p>不同在于<code>reactive</code>对象在读取字段的值，或者修改值的时候，与普通对象是一样的。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 声明对象的格式</span>
<span class="token keyword">interface</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个成员对象</span>
<span class="token keyword">const</span> userInfo<span class="token operator">:</span> Member <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 读取用户名</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

<span class="token comment">// 修改用户名</span>
userInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Petter'</span>
</code></pre></div><p>不要对通过 <code>reactive</code> 定义的对象进行解构，解构后得到的变量会失去响应性。</p> <p><strong>toRef 与 toRefs</strong></p> <p>用于 <code>reactive</code> 向 <code>ref</code> 转换。</p> <p>两个 API 的拼写非常接近，顾名思义，一个是只转换一个字段，一个是转换所有字段。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/document/pinia.html" class="prev">
        Pinia 新一代状态管理
      </a></span> <span class="next"><a href="/document/vue3-base.html">
        Vue3 基础知识
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fbb00a38.js" defer></script><script src="/assets/js/2.2784263e.js" defer></script><script src="/assets/js/37.16584230.js" defer></script>
  </body>
</html>
